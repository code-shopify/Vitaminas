<div class="t4s-section-inner contenedor swiper-container" 
     style="background-color: {{ section.settings.background_color }}; overflow: hidden;">
  
  <div class="container">
    
    <div class="marquee-desktop d-flex justify-content-center gap-4">
      {% for i in (1..6) %}
        {% assign image_key = 'icon_' | append: i | append: '_image' %}
        {% assign text_key = 'icon_' | append: i | append: '_text' %}
        {% assign image = section.settings[image_key] %}
        {% assign text = section.settings[text_key] %}

        {% if image != blank or text != blank %}
          <div class="d-flex align-items-center icon-block">
            {% if image != blank %}
              <img src="{{ image | img_url: 'auto' }}" class="img-fluid icon-img me-2" alt="{{ text }}">
            {% endif %}
            <p class="icon-text" style="color: {{ section.settings.text_color }};">
              {{ text }}
            </p>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <div class="marquee-mobile">
      <div class="swiper mySwiper">
        <div class="swiper-wrapper">
          
          {% for i in (1..6) %}
            {% assign image_key = 'icon_' | append: i | append: '_image' %}
            {% assign text_key = 'icon_' | append: i | append: '_text' %}
            {% assign image = section.settings[image_key] %}
            {% assign text = section.settings[text_key] %}

            {% if image != blank or text != blank %}
              <div class="swiper-slide d-flex align-items-center icon-block">
                {% if image != blank %}
                  <img src="{{ image | img_url: 'auto' }}" class="img-fluid icon-img me-2" alt="{{ text }}">
                {% endif %}
                <p class="icon-text" style="color: {{ section.settings.text_color }};">
                  {{ text }}
                </p>
              </div>
            {% endif %}
          {% endfor %}

          {% for i in (1..6) %}
            {% assign image_key = 'icon_' | append: i | append: '_image' %}
            {% assign text_key = 'icon_' | append: i | append: '_text' %}
            {% assign image = section.settings[image_key] %}
            {% assign text = section.settings[text_key] %}

            {% if image != blank or text != blank %}
              <div class="swiper-slide d-flex align-items-center icon-block">
                {% if image != blank %}
                  <img src="{{ image | img_url: 'auto' }}" class="img-fluid icon-img me-2" alt="{{ text }}">
                {% endif %}
                <p class="icon-text" style="color: {{ section.settings.text_color }};">
                  {{ text }}
                </p>
              </div>
            {% endif %}
          {% endfor %}

        </div>
      </div>
    </div>

  </div>
</div>

{% style %}
  .t4s-section-inner {
      width: 100%;
      max-width: 100%;
  }

  .swiper-container {
      width: 100%;
      height: auto;
  }

  .swiper-wrapper {
      display: flex;
      align-items: center;
  }

  .swiper-slide {
      display: flex;
      align-items: center;
      justify-content: center;
      white-space: nowrap;
      width: auto;
      padding: 10px;
  }

  .icon-block {
      display: flex;
      align-items: center;
      gap: 8px;
  }

  .icon-img {
      max-width: 30px;
      height: auto;
  }

  /* ✅ El texto se adapta a la pantalla y no es negrita */
  .icon-text {
      font-size: clamp(12px, 2vw, 16px);
      text-align: center;
      margin: 0;
      white-space: nowrap;
      font-weight: normal;
  }

  /* ✅ Diseño para escritorio: los íconos son estáticos */
  @media (min-width: 1025px) {
      .marquee-desktop {
          display: flex;
          justify-content: center;
          gap: 20px;
      }
      .marquee-mobile {
          display: none;
      }
  }

  /* ✅ Diseño para tablets y móviles: activa Swiper */
  @media (max-width: 1024px) {
      .marquee-desktop {
          display: none !important;
      }
  }

  @media (max-width: 767px) {
      .contenedor {
          height: 30px;
      }

      .marquee-mobile {
          font-size: 5px;
      }
  }
{% endstyle %}

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    if (window.innerWidth <= 1024) {
      var swiper = new Swiper(".mySwiper", {
        slidesPerView: "auto",
        spaceBetween: 20,
        loop: true,
        speed: 5000,
        autoplay: {
          delay: 0,
          disableOnInteraction: false,
        },
        allowTouchMove: false,
        freeMode: {
          enabled: true,
          momentum: false,
        },
      });
    }
  });
</script>

{% schema %}
{
  "name": "Swiper Slider de Iconos",
  "settings": [
    {
      "type": "color",
      "id": "background_color",
      "label": "Color de fondo",
      "default": "#DDE066"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Color del texto",
      "default": "#000000"
    },
    {
      "type": "image_picker",
      "id": "icon_1_image",
      "label": "Primera Imagen"
    },
    {
      "type": "text",
      "id": "icon_1_text",
      "label": "Texto 1",
      "default": "Sin Saborizantes Artificiales"
    },
    {
      "type": "image_picker",
      "id": "icon_2_image",
      "label": "Segunda Imagen"
    },
    {
      "type": "text",
      "id": "icon_2_text",
      "label": "Texto 2",
      "default": "Sin Lácteos"
    },
    {
      "type": "image_picker",
      "id": "icon_3_image",
      "label": "Tercera Imagen"
    },
    {
      "type": "text",
      "id": "icon_3_text",
      "label": "Texto 3",
      "default": "Sin Soya"
    },
    {
      "type": "image_picker",
      "id": "icon_4_image",
      "label": "Cuarta Imagen"
    },
    {
      "type": "text",
      "id": "icon_4_text",
      "label": "Texto 4",
      "default": "Sin Gluten"
    },
    {
      "type": "image_picker",
      "id": "icon_5_image",
      "label": "Quinta Imagen"
    },
    {
      "type": "text",
      "id": "icon_5_text",
      "label": "Texto 5",
      "default": "Sin Colorantes"
    }
  ],
  "presets": [
    {
      "name": "Swiper Slider de Iconos",
      "category": "Custom"
    }
  ]
}
{% endschema %}

