<!-- 📌 Contenedor principal -->
<div class="t4s-section-inner contenedor vitatu-section align-items-center d-flex" 
     style="background-color: {{ section.settings.background_color }}; overflow: hidden; height:77px;">
  
  <div class="container">
    
    <!-- 📌 Swiper Slider -->
    <div class="swiper mySwiper">
      <div class="swiper-wrapper">
        
        <!-- 📌 Generamos dinámicamente los iconos y textos configurados en Shopify -->
        {% for i in (1..6) %}
          {% assign image_key = 'icon_' | append: i | append: '_image' %}
          {% assign text_key = 'icon_' | append: i | append: '_text' %}
          {% assign image = section.settings[image_key] %}
          {% assign text = section.settings[text_key] %}

          {% if image != blank or text != blank %}
            <!-- 📌 Slide con ícono y texto -->
            <div class="swiper-slide d-flex align-items-center icon-block">
              {% if image != blank %}
                <img src="{{ image | img_url: 'auto' }}" class="img-fluid icon-img me-2" alt="{{ text }}">
              {% endif %}
              <p class="fw-bold icon-text" style="color: {{ section.settings.text_color }};">
                {{ text }}
              </p>
            </div>
          {% endif %}
        {% endfor %}

        <!-- 📌 Se duplica el contenido para efecto continuo sin cortes -->
        {% for i in (1..6) %}
          {% assign image_key = 'icon_' | append: i | append: '_image' %}
          {% assign text_key = 'icon_' | append: i | append: '_text' %}
          {% assign image = section.settings[image_key] %}
          {% assign text = section.settings[text_key] %}

          {% if image != blank or text != blank %}
            <div class="swiper-slide d-flex align-items-center icon-block">
              {% if image != blank %}
                <img src="{{ image | img_url: 'auto' }}" class="img-fluid icon-img me-2" alt="{{ text }}">
              {% endif %}
              <p class="fw-bold icon-text" style="color: {{ section.settings.text_color }};">
                {{ text }}
              </p>
            </div>
          {% endif %}
        {% endfor %}
        
      </div>
    </div>

  </div>
</div>

<!-- 📌 Estilos Swiper -->
{% style %}
  /* 📌 Configuración general del Swiper */
  .swiper {
      width: 100%;
      height: 100%;
  }

  /* 📌 Asegurar que los slides estén alineados horizontalmente */
  .swiper-wrapper {
      display: flex;
      align-items: center;
  }

  /* 📌 Configuración del slide */
  .swiper-slide {
      display: flex;
      align-items: center;
      justify-content: center;
      white-space: nowrap;
      width: auto;
  }

  /* 📌 Configuración del ícono y texto */
  .icon-block {
      display: flex;
      align-items: center;
      gap: 8px;
  }

  /* 📌 Tamaño de los iconos */
  .icon-img {
      max-width: 30px;
      height: auto;
  }

  /* 📌 Asegurar que el texto no haga saltos de línea */
  .icon-text {
      font-size: 16px;
      text-align: center;
      margin: 0;
      white-space: nowrap;
  }
{% endstyle %}

<!-- 📌 Swiper.js Script -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    var swiper = new Swiper(".mySwiper", {
      slidesPerView: "auto", // 📌 Distribución fluida de slides
      spaceBetween: 20, // 📌 Espacio entre elementos
      loop: true, // 📌 Habilita el desplazamiento infinito
      speed: 20000, // 📌 Velocidad de la animación (ajusta según prefieras)
      autoplay: {
        delay: 0, // 📌 Sin pausas entre desplazamientos
        disableOnInteraction: false, // 📌 Permite seguir moviéndose tras interacción
      },
      allowTouchMove: false, // 📌 Evita que el usuario frene el desplazamiento
      freeMode: true, // 📌 Movimiento continuo como marquee
    });
  });
</script>

<!-- 📌 Shopify Section Schema -->
{% schema %}
{
  "name": "Sección de Iconos",
  "settings": [
    {
      "type": "color",
      "id": "background_color",
      "label": "Color de fondo",
      "default": "#DDE066"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Color del texto",
      "default": "#000000"
    },
    {
      "type": "image_picker",
      "id": "icon_1_image",
      "label": "Primera Imagen"
    },
    {
      "type": "text",
      "id": "icon_1_text",
      "label": "Texto 1",
      "default": "Sin Saborizantes Artificiales"
    },
    {
      "type": "image_picker",
      "id": "icon_2_image",
      "label": "Segunda Imagen"
    },
    {
      "type": "text",
      "id": "icon_2_text",
      "label": "Texto 2",
      "default": "Sin Lácteos"
    },
    {
      "type": "image_picker",
      "id": "icon_3_image",
      "label": "Tercera Imagen"
    },
    {
      "type": "text",
      "id": "icon_3_text",
      "label": "Texto 3",
      "default": "Sin Soya"
    },
    {
      "type": "image_picker",
      "id": "icon_4_image",
      "label": "Cuarta Imagen"
    },
    {
      "type": "text",
      "id": "icon_4_text",
      "label": "Texto 4",
      "default": "Sin Gluten"
    },
    {
      "type": "image_picker",
      "id": "icon_5_image",
      "label": "Quinta Imagen"
    },
    {
      "type": "text",
      "id": "icon_5_text",
      "label": "Texto 5",
      "default": "Sin Colorantes"
    },
    {
      "type": "image_picker",
      "id": "icon_6_image",
      "label": "Sexta Imagen"
    },
    {
      "type": "text",
      "id": "icon_6_text",
      "label": "Texto 6",
      "default": "Sin Endulzantes Artificiales"
    }
  ],
  "presets": [
    {
      "name": "Sección de Iconos",
      "category": "Custom"
    }
  ]
}
{% endschema %}

